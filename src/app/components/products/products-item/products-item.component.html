<app-header></app-header>
<app-loader *ngIf="!product"></app-loader>
<div *ngIf="product" class="page">
  <div class="hero position-relative">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-8">
          <p class="hero__title">{{product.waveSystemProductName}}</p><!--
          <p class="hero__sub-title">{{manufacturer.excerpt}}</p>-->
        </div>
      </div>
    </div>
    <div class="layout">
      <button (click)="onToggleLayout()" class="zoom__btn zoom__btn_in">
        <img src="../../../../assets/icons/list-task.svg" alt="">
        <img src="../../../../assets/icons/pin-map.svg" alt="">
      </button>
    </div>
  </div>
  <div *ngIf="!isMap" class="container">
    <div class="row">
      <div class="col">
        <div *ngIf="isTablet" class="layout">
          <button (click)="onToggleLayout()" class="zoom__btn zoom__btn_in">
            <img src="../../../../assets/icons/list-task.svg" alt="">
            <img src="../../../../assets/icons/pin-map.svg" alt="">
          </button>
        </div>
        <!--
                <div class="page__content" [innerHTML]="manufacturer.content.length < manufacturer.excerpt.length ? manufacturer.excerpt : manufacturer.content"></div>
        -->
        <p class="section__title">{{product.waveSystemProductName}}</p>
        <div *ngIf="product.waveSystemProductAbout || product.waveSystemProductExcerpt || product.waveSystemProductURL" class="section">
          <!--<h2 class="section__title">About {{manufacturer.title}}</h2>-->
          <div class="d-flex flex-column gap-5">
            <div class="section__text" *ngIf="product.waveSystemProductExcerpt" [innerHTML]="parserService.replaceURLs(product.waveSystemProductExcerpt) | safe: 'html'"></div>
            <div class="section__text" *ngIf="product.waveSystemProductAbout" [innerHTML]="parserService.replaceURLs(product.waveSystemProductAbout) | safe: 'html'"></div>

            <div class="section__text" *ngIf="product.waveSystemProductURL" [innerHTML]="parserService.replaceURLs(product.waveSystemProductURL) | safe: 'html'"></div>
            <a class="section__text flex-row justify-content-start" *ngIf="product.waveSystemProductManufacturer">
              More about manufacturer <strong (click)="goTo('manufactures', product.waveSystemProductManufacturer)">here</strong>
            </a>
            <a class="section__text flex-row justify-content-start" *ngIf="product.waveSystemProductProductionMethod">
              More about technology <strong (click)="goTo('technologies', product.waveSystemProductProductionMethod)">here</strong>
            </a>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="isMap">
    <div class="layout layout-map">
      <button (click)="onToggleLayout()" class="zoom__btn zoom__btn_in">
        <img src="../../../../assets/icons/list-task.svg" alt="" *ngIf="isMap">
        <img src="../../../../assets/icons/pin-map.svg" alt="" *ngIf="!isMap">
      </button>
    </div>

    <div class="zoom" *ngIf="isMap">
      <button (click)="zoomIn()" class="zoom__btn zoom__btn_in">
        <img src="../../../../assets/icons/plus.svg" alt="">
      </button>
      <button (click)="zoomOut()" class="zoom__btn zoom__btn_out">
        <img src="../../../../assets/icons/minus.svg" alt="">
      </button>
    </div>

    <ng-container *ngIf="isMap">
      <google-map
              [height]="height"
              width="100%"
              [zoom]="zoom"
              [center]="center"
              [options]="options"
              style="padding-top: 97px"
      >
        <map-marker
            #somemarker="mapMarker"
            *ngFor="let marker of markers"
            [position]="marker.position"
            [label]="marker.label"
            [title]="marker.title"
            [options]="marker.options"
            (mapClick)="openInfo(somemarker, marker)"
        ></map-marker>
        <map-info-window>
          <div *ngIf="infoContent && infoContent.title">
            <p class="marker__title">
              Heading to
              <strong [routerLink]="'../../location/' + infoContent.name">{{infoContent.title}}</strong>
              today?
            </p>
            <!--<p class="marker__label">Tap here to get directions</p>-->
            <div class="d-flex">
              <a [href]="infoContent.direction" class="marker__action" target="_blank">GET DIRECTIONS</a>
              <a *ngIf="infoContent.reflink" [href]="infoContent.reflink" class="marker__action marker__action-outline" target="_blank">BOOK NOW</a>
            </div>
          </div>
        </map-info-window>
      </google-map>
    </ng-container>
  </div>
</div>
