<app-header></app-header>
<!--<app-loader *ngIf="isLoading"></app-loader>-->
<div class="page">
  <div class="hero">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-8">
          <p class="hero__title">Compare</p>
          <!--<p class="hero__sub-title">Some text should be here...</p>-->
        </div>
      </div>
    </div>
  </div>

  <div class="details">
    <div class="container">
      <div class="row ">
        <div class="col-8">
          <p>Last updated: <strong>{{lastUpdated}}</strong></p>
        </div>
        <div class="col text-right">
          <p>Items: <strong>{{filteredLocations.length}}</strong></p>
        </div>
      </div>
    </div>
  </div>

  <div class="page__navigation">
    <div class="container">
      <div class="row align-items-center">
        <div class="col">
          <p class="page__title">Compare</p>
        </div>
        <div class="col">
          <ul class="location-nav navbar">
            <li *ngFor="let i of nav"
                [class.active]="activeFilterCheck(i.id)"
                (click)="onFilter(i)">
              <div class="picture" [id]="i.id">
                <img src="assets/images/{{i.icon}}.png" alt="shield">
                <span>{{i.title}}</span>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="filteredLocations.length" class="container">
    <div class="row">
      <div class="col table-wrapper">
        <table class="table table-striped">
          <tr>
            <th (click)="sortTable('waveLocationName')">
              Wavelocation
              <img *ngIf="sortColumn === 'waveLocationName'"
                   class="rot" [class.rotated]="sortDirection !== 1" src="../../../assets/icons/sort.svg" alt="">
            </th>
            <th (click)="sortTable('price')" class="text-right">
              Hour
              <img *ngIf="sortColumn === 'price'"
                   class="rot" [class.rotated]="sortDirection !== 1" src="../../../assets/icons/sort.svg" alt="">
            </th>
            <th (click)="sortTable('ppms')" class="text-right">
              <span title="Price Per Minute Surfing">
                Price Per Minute Surfing
                <i style="display: inline-block;
                          font-style: normal;
                          background: #008bb2;
                          color: #fff;
                          width: 16px;
                          height: 16px;
                          text-align: center;
                          line-height: 16px;
                          border-radius: 10px;"
                          [popover]="calculationInfo"
                          triggers="mouseenter:mouseleave"
                          class="d-none-mobile">i</i>
              </span>
              <img *ngIf="sortColumn === 'ppms'"
                   class="rot" [class.rotated]="sortDirection !== 1" src="../../../assets/icons/sort.svg" alt="">
            </th>
          </tr>
          <tr *ngFor="let item of sortedItems && sortedItems.length > 0 ? sortedItems : filteredLocations"
              [routerLink]="['../location', item.waveLocationKey]">
            <td>
              <span>{{item.waveLocationName}}</span>
            </td>
            <td class="text-right">{{item['price']}}</td>
            <td class="text-right">{{item['ppms']}}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>

  <div *ngIf="!filteredLocations.length" class="container nodata">
    <img src="../../../assets/icons/no-results.svg" class="nodata__img" alt="">
    <h3 class="nodata__title">No available wavelocations on Your request</h3>
    <button class="nodata__button" (click)="onFilter(nav[0])">Reset filter</button>
  </div>

</div>

<ng-template #calculationInfo >
  <div>
    Price Adult High (euro) / Rides Per Hour * Duration Ride<br>
    Example:<br>
    Price Adult High = 50 (euro)<br>
    Rides Per Hour = 10<br>
    Duration Ride = 15 seconds<br>
    Calculation:<br>
    150 seconds = 2,5 minute<br>
    50/2,5 = 20 euro per minute surfing.
  </div>
</ng-template>
